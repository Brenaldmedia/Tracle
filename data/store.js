function a0_0x37f7(_0x7078be,_0xdeff3e){const _0x277fe9=a0_0x277f();return a0_0x37f7=function(_0x37f707,_0x4b6b71){_0x37f707=_0x37f707-0x136;let _0x59a04b=_0x277fe9[_0x37f707];return _0x59a04b;},a0_0x37f7(_0x7078be,_0xdeff3e);}const a0_0x2ac25e=a0_0x37f7;(function(_0x46caa3,_0x1b29fa){const _0x137195=a0_0x37f7,_0x408d47=_0x46caa3();while(!![]){try{const _0xd2b405=parseInt(_0x137195(0x16a))/0x1+parseInt(_0x137195(0x13f))/0x2*(parseInt(_0x137195(0x13e))/0x3)+-parseInt(_0x137195(0x14e))/0x4+parseInt(_0x137195(0x155))/0x5+parseInt(_0x137195(0x18a))/0x6*(parseInt(_0x137195(0x185))/0x7)+-parseInt(_0x137195(0x162))/0x8+-parseInt(_0x137195(0x189))/0x9;if(_0xd2b405===_0x1b29fa)break;else _0x408d47['push'](_0x408d47['shift']());}catch(_0x28e8fb){_0x408d47['push'](_0x408d47['shift']());}}}(a0_0x277f,0xeb379));const {isJidBroadcast,isJidGroup,isJidNewsletter}=require(a0_0x2ac25e(0x15b)),fs=require('fs/promises'),path=require('path'),{DataTypes}=require('sequelize'),{DATABASE}=require('../lib/database'),storeDir=path[a0_0x2ac25e(0x177)](process[a0_0x2ac25e(0x166)](),a0_0x2ac25e(0x15c)),readJSON=async _0x549d2c=>{const _0x3a520f=a0_0x2ac25e,_0x1bbc44={'egxqE':_0x3a520f(0x17f)};try{const _0x4d006d=path[_0x3a520f(0x177)](storeDir,_0x549d2c),_0x57a942=await fs[_0x3a520f(0x165)](_0x4d006d,_0x1bbc44[_0x3a520f(0x170)]);return JSON[_0x3a520f(0x17e)](_0x57a942);}catch{return[];}},writeJSON=async(_0x4189f1,_0x4b2e7c)=>{const _0xde904f=a0_0x2ac25e,_0x16a260=path['join'](storeDir,_0x4189f1);await fs[_0xde904f(0x172)](storeDir,{'recursive':!![]}),await fs[_0xde904f(0x16b)](_0x16a260,JSON[_0xde904f(0x157)](_0x4b2e7c,null,0x2));},saveContact=async(_0x7cf514,_0x296811)=>{const _0x4f4511=a0_0x2ac25e,_0x133f40={'rPvym':function(_0x3579d4,_0x3233c9){return _0x3579d4(_0x3233c9);},'OJEnt':function(_0x30017a,_0x2785b3){return _0x30017a(_0x2785b3);},'HojBB':function(_0x3362da,_0x4166f4){return _0x3362da(_0x4166f4);},'LEOVf':function(_0x11c545,_0x598b55){return _0x11c545>_0x598b55;},'ZIQRJ':_0x4f4511(0x186)};if(!_0x7cf514||!_0x296811||_0x133f40['rPvym'](isJidGroup,_0x7cf514)||_0x133f40['OJEnt'](isJidBroadcast,_0x7cf514)||_0x133f40[_0x4f4511(0x184)](isJidNewsletter,_0x7cf514))return;const _0x5c3b17=await readJSON(_0x4f4511(0x186)),_0x304ab8=_0x5c3b17[_0x4f4511(0x147)](_0x5ae05e=>_0x5ae05e[_0x4f4511(0x154)]===_0x7cf514);_0x133f40[_0x4f4511(0x163)](_0x304ab8,-0x1)?_0x5c3b17[_0x304ab8][_0x4f4511(0x14b)]=_0x296811:_0x5c3b17[_0x4f4511(0x152)]({'jid':_0x7cf514,'name':_0x296811}),await writeJSON(_0x133f40['ZIQRJ'],_0x5c3b17);},getContacts=async()=>{const _0x2762c1=a0_0x2ac25e,_0x5c176a={'biZLR':function(_0x57929c,_0x577d80){return _0x57929c(_0x577d80);},'RfOOJ':_0x2762c1(0x186)};try{const _0x2f4e68=await _0x5c176a[_0x2762c1(0x150)](readJSON,_0x5c176a[_0x2762c1(0x153)]);return _0x2f4e68;}catch(_0x907929){return[];}},saveMessage=async _0x2220bf=>{const _0x5f5c63=a0_0x2ac25e,_0x427dc3={'HQvbI':function(_0x260d0f,_0x15d7a3,_0x2f7cb0){return _0x260d0f(_0x15d7a3,_0x2f7cb0);},'TyBxL':function(_0xcba961,_0x1b6980){return _0xcba961(_0x1b6980);},'UpWxC':_0x5f5c63(0x178),'edihk':function(_0x175f22,_0xe07f0e){return _0x175f22*_0xe07f0e;},'cxYIW':function(_0x285357,_0x40c540){return _0x285357>_0x40c540;},'cKOOh':function(_0x4aac32,_0x20696d){return _0x4aac32!==_0x20696d;},'bgKZk':'oEnpb','apQyw':function(_0x4839e8,_0x26e379,_0x504bdb){return _0x4839e8(_0x26e379,_0x504bdb);}},_0x5a9986=_0x2220bf[_0x5f5c63(0x17b)]['remoteJid'],_0x2be704=_0x2220bf[_0x5f5c63(0x17b)]['id'];if(!_0x2be704||!_0x5a9986||!_0x2220bf)return;await _0x427dc3['HQvbI'](saveContact,_0x2220bf['sender'],_0x2220bf[_0x5f5c63(0x13c)]);const _0x3a6f18=await _0x427dc3[_0x5f5c63(0x159)](readJSON,_0x427dc3[_0x5f5c63(0x13b)]),_0x1a7346=_0x3a6f18[_0x5f5c63(0x147)](_0x18b9b4=>_0x18b9b4['id']===_0x2be704&&_0x18b9b4[_0x5f5c63(0x154)]===_0x5a9986),_0x55247e=_0x2220bf[_0x5f5c63(0x151)]?_0x427dc3[_0x5f5c63(0x194)](_0x2220bf[_0x5f5c63(0x151)],0x3e8):Date['now']();_0x427dc3[_0x5f5c63(0x164)](_0x1a7346,-0x1)?'FWUIh'!==_0x5f5c63(0x176)?(_0x3a6f18[_0x1a7346][_0x5f5c63(0x143)]=_0x2220bf,_0x3a6f18[_0x1a7346][_0x5f5c63(0x136)]=_0x55247e):_0x4ec764[_0x40224c]=_0x119f81:_0x427dc3[_0x5f5c63(0x199)](_0x427dc3[_0x5f5c63(0x169)],_0x427dc3['bgKZk'])?_0x462a11[_0x5f5c63(0x152)](_0x5b723f):_0x3a6f18[_0x5f5c63(0x152)]({'id':_0x2be704,'jid':_0x5a9986,'message':_0x2220bf,'timestamp':_0x55247e}),await _0x427dc3['apQyw'](writeJSON,_0x5f5c63(0x178),_0x3a6f18);},loadMessage=async _0x3aac07=>{const _0x3a72b6=a0_0x2ac25e,_0x5f5a20={'epGIE':function(_0x2f8b9e,_0x41230b){return _0x2f8b9e(_0x41230b);},'VWpJF':_0x3a72b6(0x178)};if(!_0x3aac07)return null;const _0x135471=await _0x5f5a20[_0x3a72b6(0x17d)](readJSON,_0x5f5a20[_0x3a72b6(0x19d)]);return _0x135471[_0x3a72b6(0x140)](_0xf4b85d=>_0xf4b85d['id']===_0x3aac07)||null;},getName=async _0x131c94=>{const _0x4fa63d=a0_0x2ac25e,_0x54e93b={'sEghS':function(_0x1f49f8,_0x2275ff){return _0x1f49f8(_0x2275ff);}},_0x2fc7d4=await _0x54e93b[_0x4fa63d(0x198)](readJSON,_0x4fa63d(0x186)),_0x4841ba=_0x2fc7d4[_0x4fa63d(0x140)](_0x4a7f85=>_0x4a7f85[_0x4fa63d(0x154)]===_0x131c94);return _0x4841ba?_0x4841ba[_0x4fa63d(0x14b)]:_0x131c94['split']('@')[0x0][_0x4fa63d(0x191)](/_/g,'\x20');},saveGroupMetadata=async(_0x390140,_0x5e9bf2)=>{const _0x4f897a=a0_0x2ac25e,_0x37af04={'aGnws':function(_0x4c5150,_0x93dc1){return _0x4c5150(_0x93dc1);},'lJeJb':function(_0x43ac53,_0x432de0){return _0x43ac53*_0x432de0;},'ofOYo':function(_0xee088e,_0x96f110){return _0xee088e*_0x96f110;},'egpAx':_0x4f897a(0x18e),'AoCnk':function(_0x435d54,_0xe952cb,_0x45bfeb){return _0x435d54(_0xe952cb,_0x45bfeb);}};if(!_0x37af04[_0x4f897a(0x15a)](isJidGroup,_0x390140))return;const _0x46fdef=await _0x5e9bf2['groupMetadata'](_0x390140),_0x51184f={'jid':_0x46fdef['id'],'subject':_0x46fdef[_0x4f897a(0x141)],'subjectOwner':_0x46fdef[_0x4f897a(0x174)],'subjectTime':_0x46fdef[_0x4f897a(0x195)]?new Date(_0x37af04[_0x4f897a(0x181)](_0x46fdef[_0x4f897a(0x195)],0x3e8))['toISOString']():null,'size':_0x46fdef[_0x4f897a(0x13a)],'creation':_0x46fdef[_0x4f897a(0x16f)]?new Date(_0x37af04[_0x4f897a(0x18d)](_0x46fdef[_0x4f897a(0x16f)],0x3e8))[_0x4f897a(0x144)]():null,'owner':_0x46fdef[_0x4f897a(0x197)],'desc':_0x46fdef[_0x4f897a(0x13d)],'descId':_0x46fdef[_0x4f897a(0x156)],'linkedParent':_0x46fdef[_0x4f897a(0x196)],'restrict':_0x46fdef[_0x4f897a(0x148)],'announce':_0x46fdef[_0x4f897a(0x15e)],'isCommunity':_0x46fdef[_0x4f897a(0x182)],'isCommunityAnnounce':_0x46fdef[_0x4f897a(0x17c)],'joinApprovalMode':_0x46fdef[_0x4f897a(0x19c)],'memberAddMode':_0x46fdef[_0x4f897a(0x16e)],'ephemeralDuration':_0x46fdef[_0x4f897a(0x14c)]},_0x392c7e=await _0x37af04[_0x4f897a(0x15a)](readJSON,_0x37af04[_0x4f897a(0x18c)]),_0x1b3251=_0x392c7e['findIndex'](_0x1ad8e9=>_0x1ad8e9[_0x4f897a(0x154)]===_0x390140);_0x1b3251>-0x1?_0x392c7e[_0x1b3251]=_0x51184f:_0x392c7e[_0x4f897a(0x152)](_0x51184f);await _0x37af04[_0x4f897a(0x137)](writeJSON,_0x37af04[_0x4f897a(0x18c)],_0x392c7e);const _0x420e2e=_0x46fdef[_0x4f897a(0x188)][_0x4f897a(0x193)](_0x1b2446=>({'jid':_0x390140,'participantId':_0x1b2446['id'],'admin':_0x1b2446[_0x4f897a(0x158)]}));await _0x37af04[_0x4f897a(0x137)](writeJSON,_0x390140+_0x4f897a(0x145),_0x420e2e);},getGroupMetadata=async _0x4322a1=>{const _0x8d69b3=a0_0x2ac25e,_0x5d18ae={'EfQnA':function(_0x38b299,_0x2d8795){return _0x38b299(_0x2d8795);}};if(!_0x5d18ae[_0x8d69b3(0x149)](isJidGroup,_0x4322a1))return null;const _0x5072e2=await readJSON('metadata.json'),_0x4e3522=_0x5072e2[_0x8d69b3(0x140)](_0x235932=>_0x235932[_0x8d69b3(0x154)]===_0x4322a1);if(!_0x4e3522)return null;const _0x4f0ee6=await _0x5d18ae[_0x8d69b3(0x149)](readJSON,_0x4322a1+'_participants.json');return{..._0x4e3522,'participants':_0x4f0ee6};},saveMessageCount=async _0x3f349e=>{const _0x4be84a=a0_0x2ac25e,_0xe76003={'vIKVM':function(_0x2ec15d,_0x4c7cff){return _0x2ec15d||_0x4c7cff;},'oExzM':function(_0x385d02,_0x50216c){return _0x385d02(_0x50216c);},'BSfEs':function(_0x5d1cf2,_0x26153b){return _0x5d1cf2>_0x26153b;},'DLeWx':_0x4be84a(0x183),'PlZwz':function(_0x22b73a,_0x154e08,_0x1b847b){return _0x22b73a(_0x154e08,_0x1b847b);},'mXNVw':_0x4be84a(0x16c)};if(!_0x3f349e)return;const _0x4ce505=_0x3f349e[_0x4be84a(0x17b)]['remoteJid'],_0x55eabb=_0x3f349e[_0x4be84a(0x17b)][_0x4be84a(0x180)]||_0x3f349e[_0x4be84a(0x168)];if(_0xe76003[_0x4be84a(0x173)](!_0x4ce505,!_0x55eabb)||!isJidGroup(_0x4ce505))return;const _0x5e84e1=await _0xe76003[_0x4be84a(0x171)](readJSON,_0x4be84a(0x16c)),_0x57cc6d=_0x5e84e1[_0x4be84a(0x147)](_0x4dfc96=>_0x4dfc96[_0x4be84a(0x154)]===_0x4ce505&&_0x4dfc96['sender']===_0x55eabb);_0xe76003[_0x4be84a(0x146)](_0x57cc6d,-0x1)?_0x4be84a(0x183)!==_0xe76003[_0x4be84a(0x16d)]?_0x27718b['push']({'id':_0x37faa7,'jid':_0x2d4481,'message':_0x46cdff,'timestamp':_0x55bdf5}):_0x5e84e1[_0x57cc6d][_0x4be84a(0x179)]+=0x1:_0x5e84e1['push']({'jid':_0x4ce505,'sender':_0x55eabb,'count':0x1}),await _0xe76003[_0x4be84a(0x175)](writeJSON,_0xe76003[_0x4be84a(0x161)],_0x5e84e1);},getInactiveGroupMembers=async _0x39c088=>{const _0x5a4024=a0_0x2ac25e,_0xbb27d0={'SvPpy':function(_0x35f9b3,_0x3a1fcb){return _0x35f9b3===_0x3a1fcb;},'neVIy':function(_0x13fa87,_0x3be7ea){return _0x13fa87(_0x3be7ea);},'fGsNi':function(_0x2c90df,_0x492b32){return _0x2c90df(_0x492b32);},'LNrRC':_0x5a4024(0x16c)};if(!_0xbb27d0[_0x5a4024(0x192)](isJidGroup,_0x39c088))return[];const _0x27c691=await getGroupMetadata(_0x39c088);if(!_0x27c691)return[];const _0x4c9ef7=await _0xbb27d0[_0x5a4024(0x167)](readJSON,_0xbb27d0[_0x5a4024(0x138)]),_0x558fe7=_0x27c691['participants'][_0x5a4024(0x139)](_0x5bae28=>{const _0x2eff65=_0x5a4024,_0x3d91e7=_0x4c9ef7[_0x2eff65(0x140)](_0x1816e1=>_0x1816e1['jid']===_0x39c088&&_0x1816e1['sender']===_0x5bae28['id']);return!_0x3d91e7||_0xbb27d0[_0x2eff65(0x15f)](_0x3d91e7[_0x2eff65(0x179)],0x0);});return _0x558fe7[_0x5a4024(0x193)](_0x232e4c=>_0x232e4c['id']);},getGroupMembersMessageCount=async _0x3fb559=>{const _0x4bbcc2=a0_0x2ac25e,_0x48e6f7={'viYey':function(_0x198dd3,_0x2d0740){return _0x198dd3(_0x2d0740);}};if(!_0x48e6f7[_0x4bbcc2(0x19a)](isJidGroup,_0x3fb559))return[];const _0x13c8dc=await _0x48e6f7[_0x4bbcc2(0x19a)](readJSON,_0x4bbcc2(0x16c)),_0x1d557f=_0x13c8dc['filter'](_0x58f98c=>_0x58f98c['jid']===_0x3fb559&&_0x58f98c[_0x4bbcc2(0x179)]>0x0)[_0x4bbcc2(0x190)]((_0x4eabff,_0x179bf7)=>_0x179bf7['count']-_0x4eabff[_0x4bbcc2(0x179)]);return Promise[_0x4bbcc2(0x142)](_0x1d557f[_0x4bbcc2(0x193)](async _0x2972a0=>({'sender':_0x2972a0[_0x4bbcc2(0x168)],'name':await getName(_0x2972a0[_0x4bbcc2(0x168)]),'messageCount':_0x2972a0['count']})));},getChatSummary=async()=>{const _0x1a02ca=a0_0x2ac25e,_0xee47ca={'wZeyY':function(_0x64e0ad,_0x4499ba){return _0x64e0ad!==_0x4499ba;},'bXrBT':_0x1a02ca(0x18b),'XxWzf':'tyYpV','nlAVM':function(_0x1948c1,_0x17b825){return _0x1948c1(_0x17b825);},'hnUGy':function(_0x27eed5,_0x1164f8){return _0x27eed5(_0x1164f8);},'CkvkF':function(_0x2a3d26,_0x41f95c){return _0x2a3d26(_0x41f95c);}},_0x57df99=await _0xee47ca[_0x1a02ca(0x17a)](readJSON,'message.json'),_0x42aa81=[...new Set(_0x57df99[_0x1a02ca(0x193)](_0x34c167=>_0x34c167['jid']))],_0x522b68=await Promise[_0x1a02ca(0x142)](_0x42aa81[_0x1a02ca(0x193)](async _0x53269a=>{const _0x12b72d=_0x1a02ca;if(_0xee47ca[_0x12b72d(0x14a)](_0xee47ca['bXrBT'],_0xee47ca[_0x12b72d(0x19b)])){const _0xa0c0dc=_0x57df99[_0x12b72d(0x139)](_0x1dcb1b=>_0x1dcb1b[_0x12b72d(0x154)]===_0x53269a),_0x432f38=_0xa0c0dc[_0x12b72d(0x15d)],_0x43fbbd=_0xa0c0dc['sort']((_0x538c68,_0x9bc577)=>new Date(_0x9bc577['timestamp'])-new Date(_0x538c68['timestamp']))[0x0],_0xbc3f21=_0xee47ca[_0x12b72d(0x187)](isJidGroup,_0x53269a)?_0x53269a:await _0xee47ca[_0x12b72d(0x18f)](getName,_0x53269a);return{'jid':_0x53269a,'name':_0xbc3f21,'messageCount':_0x432f38,'lastMessageTimestamp':_0x43fbbd?_0x43fbbd[_0x12b72d(0x136)]:null};}else return[];}));return _0x522b68[_0x1a02ca(0x190)]((_0x7ef938,_0x234f06)=>new Date(_0x234f06[_0x1a02ca(0x14f)])-new Date(_0x7ef938[_0x1a02ca(0x14f)]));},saveMessageV1=saveMessage,saveMessageV2=_0x567216=>{const _0x147d91=a0_0x2ac25e,_0x27886f={'IiBQN':function(_0x20c00b,_0x480f39){return _0x20c00b(_0x480f39);}};return Promise[_0x147d91(0x142)]([_0x27886f[_0x147d91(0x14d)](saveMessageV1,_0x567216),_0x27886f[_0x147d91(0x14d)](saveMessageCount,_0x567216)]);};function a0_0x277f(){const _0x1c34d1=['readFile','cwd','fGsNi','sender','bgKZk','1469174FAPFgu','writeFile','message_count.json','DLeWx','memberAddMode','creation','egxqE','oExzM','mkdir','vIKVM','subjectOwner','PlZwz','fMSIq','join','message.json','count','CkvkF','key','isCommunityAnnounce','epGIE','parse','utf8','participant','lJeJb','isCommunity','bYiXd','HojBB','404341KhTkKj','contact.json','nlAVM','participants','20859831yNuRsm','84JrTVwG','LbJZp','egpAx','ofOYo','metadata.json','hnUGy','sort','replace','neVIy','map','edihk','subjectTime','linkedParent','owner','sEghS','cKOOh','viYey','XxWzf','joinApprovalMode','VWpJF','timestamp','AoCnk','LNrRC','filter','size','UpWxC','pushName','desc','25260rpbknD','344lWcsKl','find','subject','all','message','toISOString','_participants.json','BSfEs','findIndex','restrict','EfQnA','wZeyY','name','ephemeralDuration','IiBQN','2009712QpJooo','lastMessageTimestamp','biZLR','messageTimestamp','push','RfOOJ','jid','601850CMllgN','descId','stringify','admin','TyBxL','aGnws','@whiskeysockets/baileys','store','length','announce','SvPpy','exports','mXNVw','502640JYOtRY','LEOVf','cxYIW'];a0_0x277f=function(){return _0x1c34d1;};return a0_0x277f();}module[a0_0x2ac25e(0x160)]={'saveContact':saveContact,'loadMessage':loadMessage,'getName':getName,'getChatSummary':getChatSummary,'saveGroupMetadata':saveGroupMetadata,'getGroupMetadata':getGroupMetadata,'saveMessageCount':saveMessageCount,'getInactiveGroupMembers':getInactiveGroupMembers,'getGroupMembersMessageCount':getGroupMembersMessageCount,'saveMessage':saveMessageV2};