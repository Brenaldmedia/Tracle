const a0_0x3b8fd1=a0_0x2438;function a0_0x783a(){const _0x31582a=['readFileSync','LHykl','hex','randomBytes','PrqdT','Error\x20fetching\x20image:','352539KrlPOu','get','save','UCZQE','-loop','error','path','ESbrU','libwebp','yWvWy','axios','941740hfqFCc','@ffmpeg-installer/ffmpeg','join','eyJPU','setFfmpegPath','bsjtZ','.webp','exports','Could\x20not\x20fetch\x20GIF.','717828FUVaww','4816QjUMUK','unlinkSync','108340TAUmkw','4174XkyExZ','ndBjJ','Error\x20fetching\x20GIF:','QpOih','2980070KIZfjo','default','addOutputOptions','-vcodec','end','arraybuffer','-an','eFUfa','209QfFzht','cBqoR','9cHOTlf','JicQp','writeFileSync','Could\x20not\x20fetch\x20image.','webp','-vf','3510YTCKvt','ilKKZ','CGWOj','136JpUxbN','-vsync','pUoGm','toString','toFormat','VbBoO','202RBPBRk','data','rytMH','.gif'];a0_0x783a=function(){return _0x31582a;};return a0_0x783a();}function a0_0x2438(_0x2a3111,_0x4492fe){const _0x783ae=a0_0x783a();return a0_0x2438=function(_0x243824,_0x10b85a){_0x243824=_0x243824-0x14a;let _0x59140f=_0x783ae[_0x243824];return _0x59140f;},a0_0x2438(_0x2a3111,_0x4492fe);}(function(_0x448e35,_0x4dc576){const _0x1b1603=a0_0x2438,_0x447b4c=_0x448e35();while(!![]){try{const _0x35bdb3=-parseInt(_0x1b1603(0x159))/0x1*(-parseInt(_0x1b1603(0x176))/0x2)+-parseInt(_0x1b1603(0x167))/0x3*(parseInt(_0x1b1603(0x14c))/0x4)+parseInt(_0x1b1603(0x15d))/0x5+-parseInt(_0x1b1603(0x16d))/0x6*(parseInt(_0x1b1603(0x156))/0x7)+parseInt(_0x1b1603(0x170))/0x8*(-parseInt(_0x1b1603(0x180))/0x9)+-parseInt(_0x1b1603(0x158))/0xa+-parseInt(_0x1b1603(0x165))/0xb*(-parseInt(_0x1b1603(0x155))/0xc);if(_0x35bdb3===_0x4dc576)break;else _0x447b4c['push'](_0x447b4c['shift']());}catch(_0x566958){_0x447b4c['push'](_0x447b4c['shift']());}}}(a0_0x783a,0x59fef));const axios=require(a0_0x3b8fd1(0x14b)),fs=require('fs'),path=require(a0_0x3b8fd1(0x186)),{tmpdir}=require('os'),Crypto=require('crypto'),ffmpegPath=require(a0_0x3b8fd1(0x14d))[a0_0x3b8fd1(0x186)],ffmpeg=require('fluent-ffmpeg');ffmpeg[a0_0x3b8fd1(0x150)](ffmpegPath);async function fetchImage(_0x57d716){const _0x31bff=a0_0x3b8fd1,_0x278cbf={'cBqoR':_0x31bff(0x17f)};try{const _0x502119=await axios[_0x31bff(0x181)](_0x57d716,{'responseType':_0x31bff(0x162)});return _0x502119[_0x31bff(0x177)];}catch(_0x2ad1e7){console[_0x31bff(0x185)](_0x278cbf[_0x31bff(0x166)],_0x2ad1e7);throw new Error(_0x31bff(0x16a));}}async function fetchGif(_0x37dac8){const _0xc8ead3=a0_0x3b8fd1,_0x4bedfb={'PrqdT':'arraybuffer','yWvWy':_0xc8ead3(0x15b),'CGWOj':_0xc8ead3(0x154)};try{const _0x26b2c6=await axios[_0xc8ead3(0x181)](_0x37dac8,{'responseType':_0x4bedfb[_0xc8ead3(0x17e)]});return _0x26b2c6['data'];}catch(_0x146d63){console[_0xc8ead3(0x185)](_0x4bedfb[_0xc8ead3(0x14a)],_0x146d63);throw new Error(_0x4bedfb[_0xc8ead3(0x16f)]);}}async function gifToSticker(_0x55be52){const _0x44d3ef=a0_0x3b8fd1,_0x57cd8c={'JicQp':function(_0x5cd4ad,_0x49598a){return _0x5cd4ad(_0x49598a);},'bsjtZ':_0x44d3ef(0x161),'eyJPU':_0x44d3ef(0x188),'eFUfa':_0x44d3ef(0x16c),'rytMH':'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,pad=320:320:-1:-1:color=white@0.0,split\x20[a][b];[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];[b][p]\x20paletteuse','ESbrU':_0x44d3ef(0x184),'VbBoO':_0x44d3ef(0x15e),'UCZQE':_0x44d3ef(0x16b),'GEJpL':function(_0x37f567){return _0x37f567();},'LHykl':function(_0x907b53,_0x47340a){return _0x907b53+_0x47340a;},'QpOih':_0x44d3ef(0x17c),'ilKKZ':_0x44d3ef(0x152),'ndBjJ':function(_0x5e57d0){return _0x5e57d0();},'pUoGm':_0x44d3ef(0x179)},_0x430d6e=path[_0x44d3ef(0x14e)](_0x57cd8c['GEJpL'](tmpdir),_0x57cd8c[_0x44d3ef(0x17b)](Crypto[_0x44d3ef(0x17d)](0x6)['toString'](_0x57cd8c[_0x44d3ef(0x15c)]),_0x57cd8c[_0x44d3ef(0x16e)])),_0x723206=path['join'](_0x57cd8c[_0x44d3ef(0x15a)](tmpdir),_0x57cd8c[_0x44d3ef(0x17b)](Crypto[_0x44d3ef(0x17d)](0x6)[_0x44d3ef(0x173)](_0x44d3ef(0x17c)),_0x57cd8c[_0x44d3ef(0x172)]));fs[_0x44d3ef(0x169)](_0x723206,_0x55be52),await new Promise((_0x6417d8,_0x2f13bc)=>{const _0x5ecd95=_0x44d3ef;_0x57cd8c[_0x5ecd95(0x168)](ffmpeg,_0x723206)['on'](_0x5ecd95(0x185),_0x2f13bc)['on'](_0x57cd8c[_0x5ecd95(0x151)],()=>_0x6417d8(!![]))[_0x5ecd95(0x15f)]([_0x5ecd95(0x160),_0x57cd8c[_0x5ecd95(0x14f)],_0x57cd8c[_0x5ecd95(0x164)],_0x57cd8c[_0x5ecd95(0x178)],_0x57cd8c[_0x5ecd95(0x187)],'0','-preset',_0x57cd8c[_0x5ecd95(0x175)],_0x5ecd95(0x163),_0x5ecd95(0x171),'0'])[_0x5ecd95(0x174)](_0x57cd8c[_0x5ecd95(0x183)])[_0x5ecd95(0x182)](_0x430d6e);});const _0x109c31=fs[_0x44d3ef(0x17a)](_0x430d6e);return fs[_0x44d3ef(0x157)](_0x430d6e),fs[_0x44d3ef(0x157)](_0x723206),_0x109c31;}module[a0_0x3b8fd1(0x153)]={'fetchImage':fetchImage,'fetchGif':fetchGif,'gifToSticker':gifToSticker};